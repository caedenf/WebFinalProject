<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Moodify -- Listen with your heart</title>
    <style>
      @import url('https://fonts.googleapis.com/css?family=Rubik:300,400,500,700,900&display=swap');
    </style>
    <script src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
        crossorigin="anonymous">
    </script>
    <style media="screen">
      html {
        height: 100%;
      }
      body {
        background-image: linear-gradient(to bottom right, #A8FF78, #78FFD6);
        height: 100%;
        margin: 0;
        background-repeat: no-repeat;
        background-attachment: fixed;
        font-family: 'Rubik', sans-serif;
      }
      nav {
        margin-top:2%;
        position: fixed;
        top:0;
        width: 100%;
      }
      a {
        text-decoration: none;
        color: #000000;
      }
      #logoName {
        font-weight: 700;
      }
      #about {
        float: right;
        margin-top: 15px;
        margin-right: 3%;
        font-weight: 500;
      }
      .mainSentence {
        font-size: 3.5em;
        font-weight: 700;
        margin-top: 23%;
      }

      #scroll {
        margin-top: 20%;
        text-align: center;
      }

      #changeText {
        background-color: transparent;
        border: none;
        border-bottom: 3px solid #000000;
        font-size: 60px;
        font-family: 'Rubik', sans-serif;
        font-weight: 700;
        width: 350px;
        text-align: center;
      }

      #changeText::placeholder {
        color: #000000;
        text-align: center;
      }

      #changeText:focus::placeholder {
        /* color: #949494; */
        opacity: 0.5;
      }

      #changeText:focus {
        outline: none;
      }
    </style>
  </head>

  <body>
    <nav>
      <div class="" style="display: inline-block; margin-left: 3%;">
        <a href="#" style="font-size: 40px;" id="logoName">Moodify</a> <br>
        <span style="font-weight: 500; font-size: 15px;">Listen With Your Heart</span>
      </div>
      <a href="#" id="about">About Us</a>
    </nav>

    <div class="mainSentence">
      <div style="text-align:center;">
        <span>I want to listen to </span>
        <!-- <span id="changeText">HAPPY</span> &nbsp -->
        <input type="text" name="" value="" id="changeText" placeholder="HAPPY">
        <span> songs.</span>
      </div>
      <button onclick="searchSongs()" type="button" name="button" id="searchButton">Search</button>
    </div>

    <footer id="scroll">
      <p style="text-align: center;">Scroll down to see whatâ€™s popular on Moodify</p>
    </footer>

    <script type="text/javascript">
      var textDemoArr = ["EXCITING","PARTY","RELAXING","CALMING","HAPPY"];
      var counter = 0;
      // var element = document.getElementById('changeText');
      var inst = setInterval(change, 3000);

      function change () {
        // element.innerHTML = textDemoArr[counter];
        // element.style.transitionDuration = "1s";
        $('#changeText').attr('placeholder',textDemoArr[counter]);
        counter++;
        if (counter >= textDemoArr.length) {
          counter = 0;
        }
      }
      
      function searchSongs() {
        var searchParam = document.getElementById("changeText").value;
        makeRequest(searchParam);
      }
      
      function makeRequest(searchTerm) {
        var data = null;
        var xhr = new XMLHttpRequest();
        xhr.withCredentials = true;
        xhr.addEventListener("readystatechange", function () {
      	  if (this.readyState === this.DONE) {
      		  makePlaylist(this.responseText);
      	  }
        });
        var searchStr = "https://deezerdevs-deezer.p.rapidapi.com/search?q=" + searchTerm;
        xhr.open("GET", searchStr);
        xhr.setRequestHeader("x-rapidapi-host", "deezerdevs-deezer.p.rapidapi.com");
        xhr.setRequestHeader("x-rapidapi-key", "ed0387ed35msh68081b71c8d3a3cp129c22jsne333d255819e");
        xhr.send(data);
      }
      
      function makePlaylist(data) {
        var songArray = [];
        var stringified = JSON.stringify(data);
        var objectified = JSON.parse(stringified);
        songArray = objectified;
        console.log(songArray);
      }
    </script>

  </body>
</html>
